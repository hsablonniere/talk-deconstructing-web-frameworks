= le  Web,  ses  Frameworks  et ses  Standards : d√©construire pour mieux (re?)construire...
Hubert Sablonni√®re
:author-twitter: @hsablonniere
:author-avatar: img/hsablonniere-profil-2017.jpg
:author-company: Clever Cloud
:author-company-logo: img/clever-cloud-logo.svg
:event: DevoxxFR
:date: 17 avril 2019

[slide=poster]
Poster

[slide=blank]
Fondu vers le noir

[.old]
== Prologue...

#Mettre la musique (Gymnopedie)#
#Voix off, grave, triste#
Perdu dans la jungle du Web moderne, de ses frameworks et ses standards, notre personnage principal est perdu.
Depuis le d√©but de sa carri√®re, au fil des semaines, des mois et des ann√©es... il voit naitre tous ces nouveaux outils r√©volutionnaires et prometteurs mais qui demain seront d√©laiss√©s et remplac√©s par de nouveaux encore plus mieux.

//[.old]
image::img/drawings/rip.svg[]
//logos et noms des frameworks avec RIP et pierres tombales (laisser un espace oh milieu)

C'est avec tristesse et m√©lancholie qu'il repense √† tous ces frameworks, librairies, √©diteurs de code et autres outils en ligne de commande...
#Un peu de respect pour les disparus SVP!#

//[slide=todo]
//react, angular et vue dans le centre du coolitude radar
//[.old]
image::img/drawings/radar.svg[]

...qui s'ils n'ont pas d√©j√† disparu de nos projets ont d√©j√† disparu de nos radars de coolitude.
Cette situation l'inqui√®te, le questionne et l'emp√™che de dormir.
Dans le cadre de son travail, il doit faire des choix techniques mais il ne sais plus quoi faire.
C'est √† ce moment l√† que notre personnage pris la d√©cision d'aller voir un th√©rapeuthe.

image::img/drawings/talking-legos.svg[]

// Musique
üòé Bonjour docteur.
üë©‚Äç‚öïÔ∏è Bonjour Monsieur Sablonni√®re, alors, qu'est-ce qui vous am√®ne ?
üë©‚Äç‚öïÔ∏è La derni√®re fois que je vous ai vu, c'√©tait il y a bien 10 ans...
üë©‚Äç‚öïÔ∏è Vous commenciez votre premier job et vous √©tiez en pleine crise existentielle sur "est-ce qu'il faut utiliser des espaces ou des tabulations" et sur la "prononciation des guiffes anim√©"...
üòé Des jifs, vous voulez-dire ?
üòé Non mais √ßa c'est du pass√©, j'√©tais jeune et d√©butant, je ne me posais pas les bonnes questions.

.Personnage H qui pense que les espaces c'est mieux.
image::img/drawings/talking-legos.svg[]

üòé Aujourd'hui, je prends du recul sur le monde du frontend Web et je fais un constat :
üòé Les effets de mode et de hype nous rendent beaucoup trop d√©pendant de nos outils.
üë©‚Äç‚öïÔ∏è Humm, dites mois en plus, je vois pas trop quel probl√®mes √ßa implique.

[slide=todo]
Probl√®me num√©ro 1

// illustrer les pb avec des tweets

üòé Probl√®me num√©ro 1...
üë©‚Äç‚öïÔ∏è Euh... quand on vous pose une question, vous r√©pondez toujours en sortant un PowerPoint ?

.Personnage H qui pense "mais j'utilise pas PowerPoint en plus"
image::img/drawings/talking-legos.svg[]

üòé Bah ouais pourquoi, je vois pas le probl√®me. Bref.

[slide=todo]
Probl√®me num√©ro 1

üòé Probl√®me num√©ro 1...
üòé Quand on choisi un framework (ou une lib) frontend
//, mais finalement, c'est assez vrai avec n'importe quel outil,
üòé on en oublie souvent le probl√®me qu'on voulait r√©soudre √† la base et pourtant on a l'impression d'avoir trouv√© la bonne r√©ponse, la solution √† utiliser.
üòé Parfois, c'√©tait le bon outil et parfois la solution est adapt√©e √† des probl√®mes qu'on a pas vraiment.
üë©‚Äç‚öïÔ∏è Mais pourquoi vous faites √ßa ?
üòé Parfois le choix se fait parceque la techno est cool (DX vs UX)
üòé Parfois parcequ'elle est utilis√©e/cr√©√©e par un g√©ant du Web
üòé Les recruteurs demandent tous cet outil, du coup, on se forme dessus, c'est un cercle qui s'auto alimente
üòé Il y a des confs sur le sujet et des meetups, √ßa doit forc√©ment √™tre bien
üòé Et pourtant vous n'avez peut-√™tre pas le m√™me contexte que les gens qui trouvent cette solution utile
// Analogie de la voiture
// √Ä force d'utiliser nos voitures, on en oublie qu'√† la base on avait un probl√®me, on veut se d√©placer
// en oubliant se probl√®me, on en vient √† utiliser tout le temps la m√™me solution sans se soucier des param√®tres de d√©part
// et on finit par aller acheter du pain √† 500m en polluant la plan√®te.
// Aaahhh

// Ah oui, je vois, c'est un peu comme quand on est habitu√© √† prendre sa voiture tout le temps, qu'on aime les belles bagnoles et que du coup on finit par l'utiliser pour aller chercher du pain √† 500m.
// Euh, oui c'est un peu √ßa.

[slide=todo]
Probl√®me num√©ro 2

üòé Probl√®me num√©ro 2...
üòé On fois qu'on a choisi un ecosyst√®me (fwk/lib), on a tendance √† s'enferme dedans
üòé On cherche syst√©matiquement comment faire X ou Y avec l'√©cosyst√®me foo alors que X ou Y sont universels (jQuery)
üòé On code l'√©ni√®me version de feature/composant X ou Y pour cet √©cosyst√®me
üòé Difficile de revenir en arri√®re quand on a investi du temps d'apprentissage
üòé On rempli nos cerveaux avec des noms de features (au lieu de les remplir avec des noms de pattern)
// cerveau
üòé On ne voit plus les d√©fauts de nos propres outils
üòé On soutient des fonctionnalit√©s sans les comprendre
üòé On ne regarde pas ce qui se fait ailleurs avec un oeil ouvert
üòé On compare un framework tel qu'Angular aux Web Components, √ßa n'a aucun sens
// Analogie conf√©rences Apple

// Ah vous entendre, on dirait mon fils devant une conf√©rence Apple, quand ils sortent l'iPod ou l'iPhone, je comprends qu'il soit √©merveill√©
// Mais quand Apple dit "on a vir√© le jack" il dit, "ah mais ces vraiment des g√©nies" alors qu'il a pas de casque bluetooth
// Rant sur les exemples de code d√©cor√©s apple

[slide=todo]
Probl√®me num√©ro 3

üòé Probl√®me num√©ro 3...
üòé On produit du code qui subit mal les effets du temps
üòé Les changements de son propre ecosyst√®me
üòé Du code trop coupl√© au framework lui m√™me
üòé L'arriv√©e de nouveaux standards
üòé Du code qui m√©lange les couches (souvent car on ne voit pas en quoi c'est un probl√®me)
üòé Voire m√™me sa disparition
üòé On jette √† la poubelle plein de connaissances
üòé On jette √† la poubelle plein de code
// On s'est laiss√© aller √† produire du code qui rentre dans les clous de nos outils plut√¥t que d'exiger de nos outils qu'ils proposent des branchements pour s'adapter √† notre code.
// Analogie de la TV

// euh par contre, l√† j'ai rien compris
// => analogie de la TV

image::img/drawings/talking-legos.svg[]

// Attention √† ne pas √™tre trop n√©gatif
//√Ä la base, ces outils sont cens√©s nous aider
//C'est encore, le cas, je reste persuad√© que le ratio de ce qu'ils apportent et des probl√®mes que j'√©voque est du c√¥t√© positif mais cela ne m'emp√™che pas de m'inqui√©ter.
// Bon, j'ai pas tout compris alors
// je vous prescris une th√©rapie de groupe
// vous allez m'analyser tous ces trucs en d√©tails comme vous savez faire
// vous allez r√©unir un groupe de personnes qui bossent dans votre domaine (un bon groupe de 800, c'est bien)
// et vous leur partagez vos pr√©occupations, votre analyse et votre d√©marche et puis voil√†
// wow, mais √ßa fait peur non ?
// Mais non allez, √ßa va bien se passer

[slide=poster]
Bonjour √† *toutes* et tous !
J'm'appelle Hubert Sablonni√®re,
J'suis d√©veloppeur Web chez #Clever Cloud#,
et aujourd'hui, j'ai envie de vous parler :
du Web,
de ses frameworks et autres librairies
et de ses standards.

== C'√©tait quoi  le *probl√®me* ?

[slide=todo]
todo

// j'ai essay√© de sp√©parer en 2 :
// * les probl√®mes qu'on a nous quand on √©crit du code
// * et les probl√®mes qu'on veut r√©soudre pour aider nos utilisateurs

// il faut vraiment que √ßa soit, en tant que, je veux
listes besoins utilisateurs
// en tant qu'utilisateur, je veux un site
* accessible
* responsive
* 1er chargement rapide
* navigations rapides
* fluidit√©, pas trop de lag
* pas trop de conso batterie
* pas trop de conso CPU
//
listes besoins d√©veloppeur
// en tant que d√©veloppeur, je veux
* gagner du temps (d√©marrer mon projet rapidement)
* avoir des conventions
* √©crire le moins de code possible
* √©crire du code propre et lisible
* ne pas trop r√©fl√©chir (mod√®le de pens√©e simple, abstractions)
* isolation des impacts
* √©crire du code r√©utilisable (composants)
* ne pas r√©inventer la roue
* courbe d'apprentissage
* ne pas d√©pendre des mes outils
* pouvoir travailler avec un designer

// Donc on a identifi√© les probl√®mes qu'on veut r√©soudre

== *Comment* en est-on  arriv√© l√† ?

// mais pourquoi c'est aussi compliqu√©
// on a vraiment besoin d'autant d'outils

[slide=todo]
quote Pour comprendre o√π on va, il faut savoir d'o√π on vient.

[slide=todo]
sch√©ma √®res du web (vide)

bon anniversaire le web

[slide=todo]
sch√©ma √®res du web (old school ssr)

[slide=todo]
sch√©ma √®res du web (images)

[slide=todo]
sch√©ma √®res du web (forms)
// interactivit√©

[slide=todo]
sch√©ma √®res du web (SSR + JS)
// ajout du JS
// validation de form

[slide=todo]
sch√©ma √®res du web (AJAX with jQuery)

[slide=todo]
sch√©ma √®res du web (SPA era, client side templating)

[slide=todo]
sch√©ma √®res du web (SPA era, routing)
// anchor/hash => push state

[slide=todo]
sch√©ma √®res du web (the mega bundle era with empty body)

[slide=todo]
sch√©ma √®res du web (SSR + hydratation + code splitting)

== Ce que les *frameworks*  nous apportent ?

// d√©coupage vertical => d√©coupage horizontal

// https://www.npmjs.com/package/vue-axios
// https://github.com/imcvampire/vue-axios
// https://alligator.io/react/axios-react/
// https://www.npmjs.com/package/react-axios

== Ce que les *standards*  nous apportent ?

// exemple jquery => sizzle + ajax + API chain√©e sucre syntaxique

// UTILISER LE SCHEMA DE LA TV

// custom element => mod√®le de composant avec lifecycle methods et "data binding" sur les attributs
// une API standard entr√©e/sortie (attr, prop, methods, events)
// il faut des proxy ou des getter/setter pour le databinding sur autre chose que des strings ou des booleens
// global registry & pas de rechargement √† chaud
// => pas de syst√®me simple pour le HMR
// Scoped CustomElementRegistry propal
// lazy definition propal
// form associated elements

// shadow DOM => isolation du CSS
// la suite de l'API standard entr√©e/sortie (custom prop, ::part)
// syst√®me de slots :+1
// transperce le shadow root avec des custom props
// transperce le shadow root avec des ::part (et ::theme)
// custom pseudo class propal
// pas de syst√®me simple pour faire du SSR
// => propal pour un d√©corative shadow DOM, custom elements

// <template>, une mani√®re "efficace" de cloner du DOM
// pas d'interpolation et de binding
// une propal mais elle restera simple car pas de repeat (template instanciation)
// HTML module propal

// des resources pour surveiller les specs et les implems dans les browsers
// TC39

Est-ce que votre outil est pr√™t demain √† adopter un standard et jetter son implem pour vous faire profiter du support natif ?

== *S√©parons* nos  pr√©occupations

//== Le d√©couplage chez *Clever Cloud*

== Ce que le *futur*  nous r√©serve...

// framework runtime => compilers
// bon ou mauvais
// l'id√©al serait que l'input du compiler fonctionne sans build step et que l'output soit optimis√© aux petits oignons, comme ce qu'on fait quand on minifie
// disappearing frameworks

[.old]
== ...Epilogue

// Alors, comment √ßa s'est pass√© cette th√©rapie de groupe
// Je sais pas trop, j'ai pas forc√©ment eu le temps de rentrer dans chaque d√©tails du coup,
// j'ai plut√¥t essay√© de partager mes grilles de lecture pour que chacun les adapte √† son contexte
// J'ai essay√© d'adresser le probl√®me num√©ro 1 en remettant en lumi√®re les besoins et les probl√®mes √† r√©gler quand on d√©veloppe une web app
// J'ai aussi essay√© de d√©construire les diff√©rentes fonctionnalit√©s des 3 √©cosyst√®me du moment pour qu'on puisse avoir un regard plus critique et une vision horizontale plut√¥t qu'une vision verticale
// √áa adresse √©galement le probl√®me num√©ro 2 car en comprenant mieux ces parties, on a moins peur des les remplacer par des implems plus simples ou mieux adapt√©s ou des nouveaux standard
// Et vous leur avez parl√© des TV magn√©toscopes
// Oui, le probl√®me num√©ro 3, enfin, j'ai essay√© √ßa reste un principe, il y a tjs des exceptions
// En tout cas, √ßa va un peu mieux, je vous remercie beaucoup docteur
// et je tiens √©galement √† remercie tous les membres du groupes qui m'ont √©cout√©
// merci bcp !

// Revenir sur les probl√®mes et les solutions qu'on y a apport√©
Ne vous enfermez pas dans un framework/√©cosyst√®me !
Analysez les briques qui composent ce framework/√©cosyst√®me, leur r√¥le et les avantages/inconv√©nients qu'il apporte
Int√©ressez vous aux standards pour savoir comment ils impacteront demain vos choix d'aujourd'hui
D√©coupler, isoler, s√©parer pour mieux maitriser (perf, s√©cu) s'adapter au futur
Int√©ressez vous √† ce qui se fait dans tous ces √©cosyst√®mes (en particulier si vous √™tes partisan du NIH et que vous avez votre propre framework)

.merci  beaucoup !
[slide=poster]
Outro

//[slide=question]
//Questions ?
